{% if tasks %}
{% for task in tasks %}
<div class="task-item flex flex-between {% if task.completed %}completed{% endif %}">
    <div class="flex">
        {% if user.is_authenticated %}
        <input type="checkbox" {% if task.completed %}checked{% endif %} hx-post="{% url 'toggle_task' task.pk %}"
            hx-target="#task-list" hx-swap="innerHTML">
        {% endif %}
        <div style="display: flex; gap: 1rem; align-items: center; width: 100%;">
            <div style="flex-grow: 1;">
                <a href="{% url 'task_detail' task.pk %}" style="text-decoration: none; color: inherit;">
                    <strong>{{ task.title }}</strong></a>
                {% if task.due_date %}
                <br><small class="text-secondary">Due: {{ task.due_date }}</small>
                {% endif %}
            </div>
            {% if user.is_authenticated %}
            <button class="btn btn-text" style="color: var(--danger); font-size: 1.2rem;" title="Delete Task"
                hx-post="{% url 'delete_task' task.pk %}" hx-target="#task-list"
                hx-confirm="Are you sure you want to delete this task?">
                &times;
            </button>
            {% endif %}
        </div>
    </div>
</div>
{% endfor %}
{% else %}
<p class="text-secondary">No tasks for this item.</p>
{% endif %}